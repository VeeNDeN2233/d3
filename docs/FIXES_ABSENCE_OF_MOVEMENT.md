# –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø: –î–ï–¢–ï–ö–¶–ò–Ø –û–¢–°–£–¢–°–¢–í–ò–Ø –î–í–ò–ñ–ï–ù–ò–ô

## ‚úÖ –í–ù–ï–°–ï–ù–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –¥–µ—Ç–µ–∫—Ü–∏–∏ (`inference_advanced.py`)

**–ë—ã–ª–æ:**
```python
if sequences_array is not None and len(sequences_array) > 0 and risk_level != "low":
    detailed_analysis = analyze_joint_errors(...)
```

**–°—Ç–∞–ª–æ:**
```python
# –í–ê–ñ–ù–û: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –í–°–ï–ì–î–ê, –¥–∞–∂–µ –µ—Å–ª–∏ risk_level = "low"
# —á—Ç–æ–±—ã –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–≤–∏–∂–µ–Ω–∏–π –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –æ—à–∏–±–∫–∏ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
if sequences_array is not None and len(sequences_array) > 0:
    detailed_analysis = analyze_joint_errors(
        sequences_np,
        errors_np,
        detector.threshold,
        normal_statistics=normal_statistics,
        age_weeks=age_weeks,
        analyze_all_sequences=True  # –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ, –Ω–µ —Ç–æ–ª—å–∫–æ –∞–Ω–æ–º–∞–ª—å–Ω—ã–µ
    )
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–Ω–æ–º–∞–ª–∏–∏ –∞–º–ø–ª–∏—Ç—É–¥—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –æ—à–∏–±–∫–∏ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
    amplitude_analysis = detailed_analysis.get("amplitude_analysis", {})
    if amplitude_analysis.get("has_amplitude_anomalies", False):
        if amplitude_analysis.get("critical_amplitude_drop", False):
            if risk_level == "low":
                risk_level = "high"
                anomaly_rate = 100.0
                gma_assessment = "–ê–ù–û–ú–ê–õ–¨–ù–´–ï –æ–±—â–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)"
                cp_risk = "–í–´–°–û–ö–ò–ô —Ä–∏—Å–∫ (–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ/–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏–π)"
```

### 2. –£–ª—É—á—à–µ–Ω –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∞–º–ø–ª–∏—Ç—É–¥—ã (`utils/anomaly_analyzer.py`)

**–î–æ–±–∞–≤–ª–µ–Ω—ã –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø–æ—Ä–æ–≥–∏:**

```python
# –ê–ë–°–û–õ–Æ–¢–ù–´–ï –ü–û–†–û–ì–ò (—Ñ–∏–∑–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ)
critical_amplitude_threshold = 0.01  # –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ—Ç –¥–≤–∏–∂–µ–Ω–∏–π
low_amplitude_threshold = 0.03      # –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∂–µ–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

# –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ (–ø–æ–ª–Ω–æ–µ/–ø–æ—á—Ç–∏ –ø–æ–ª–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–≤–∏–∂–µ–Ω–∏–π)
if total_anomalous_amplitude < critical_amplitude_threshold:
    critical_amplitude_drop = True
    findings.append({
        "type": "critical_absence_of_movement",
        "description": f"–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –°–ù–ò–ñ–ï–ù–ò–ï: –∞–º–ø–ª–∏—Ç—É–¥–∞ {total_anomalous_amplitude:.4f} < {critical_amplitude_threshold}",
        "severity": "high",
        "confidence": "–≤—ã—Å–æ–∫–∞—è (–∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø–æ—Ä–æ–≥)",
    })

# –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ
elif total_anomalous_amplitude < low_amplitude_threshold:
    moderate_amplitude_drop = True
    findings.append({
        "type": "moderate_reduced_amplitude",
        "description": f"–°–ù–ò–ñ–ï–ù–ù–ê–Ø –ê–ö–¢–ò–í–ù–û–°–¢–¨: –∞–º–ø–ª–∏—Ç—É–¥–∞ {total_anomalous_amplitude:.4f} < {low_amplitude_threshold}",
        "severity": "medium",
    })
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª–∏–π

**–¢–µ–ø–µ—Ä—å `has_anomalies` —É—á–∏—Ç—ã–≤–∞–µ—Ç:**
- –û—à–∏–±–∫—É —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- **–ê–Ω–æ–º–∞–ª–∏–∏ –∞–º–ø–ª–∏—Ç—É–¥—ã (–∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø–æ—Ä–æ–≥–∏)** ‚Üê –ù–û–í–û–ï
- –ê—Å–∏–º–º–µ—Ç—Ä–∏—é
- –ê–Ω–æ–º–∞–ª–∏–∏ —Å—É—Å—Ç–∞–≤–æ–≤
- –ê–Ω–æ–º–∞–ª–∏–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏

```python
has_anomalies = (
    np.sum(anomalous_mask) > 0 or  # –ê–Ω–æ–º–∞–ª–∏–∏ –ø–æ –æ—à–∏–±–∫–µ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
    amplitude_analysis.get("has_amplitude_anomalies", False) or  # –ê–Ω–æ–º–∞–ª–∏–∏ –∞–º–ø–ª–∏—Ç—É–¥—ã
    asymmetry_analysis.get("has_asymmetry", False) or  # –ê—Å–∏–º–º–µ—Ç—Ä–∏—è
    len(joint_analysis.get("findings", [])) > 0 or  # –ê–Ω–æ–º–∞–ª–∏–∏ —Å—É—Å—Ç–∞–≤–æ–≤
    speed_analysis.get("has_speed_anomalies", False)  # –ê–Ω–æ–º–∞–ª–∏–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏
)
```

### 4. –û–±–Ω–æ–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (`medical_interface.py`)

**–¢–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–Ω–æ–º–∞–ª–∏–∏ –∞–º–ø–ª–∏—Ç—É–¥—ã –¥–∞–∂–µ –ø—Ä–∏ –Ω–∏–∑–∫–æ–π –æ—à–∏–±–∫–µ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:**

```python
# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–Ω–∞–ª–∏–∑, –µ—Å–ª–∏ –µ—Å—Ç—å –∞–Ω–æ–º–∞–ª–∏–∏ –ò–õ–ò –µ—Å—Ç—å –∞–Ω–æ–º–∞–ª–∏–∏ –∞–º–ø–ª–∏—Ç—É–¥—ã
amplitude_analysis = detailed_analysis.get("amplitude_analysis", {})
has_amplitude_anomalies = amplitude_analysis.get("has_amplitude_anomalies", False)

if detailed_analysis.get("has_anomalies", False) or has_amplitude_anomalies:
    # –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
```

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–≤–∏–∂–µ–Ω–∏–π –Ω–µ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–ª–æ—Å—å –ø—Ä–∏ –Ω–∏–∑–∫–æ–π –æ—à–∏–±–∫–µ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- ‚ùå `risk_level = "low"` ‚Üí –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è
- ‚ùå –ü–æ–ª–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–≤–∏–∂–µ–Ω–∏–π –º–æ–≥–ª–æ –¥–∞—Ç—å z-score < 2.0œÉ

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–≤–∏–∂–µ–Ω–∏–π –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç—Å—è** –¥–∞–∂–µ –ø—Ä–∏ –Ω–∏–∑–∫–æ–π –æ—à–∏–±–∫–µ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- ‚úÖ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –∞–º–ø–ª–∏—Ç—É–¥—ã (< 0.01)** –≤—Å–µ–≥–¥–∞ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –∞–Ω–æ–º–∞–ª–∏—è
- ‚úÖ **–£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞ –ø–æ–≤—ã—à–∞–µ—Ç—Å—è** –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–Ω–∏–∂–µ–Ω–∏—è –∞–º–ø–ª–∏—Ç—É–¥—ã
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è** –≤ –æ—Ç—á–µ—Ç–µ –¥–∞–∂–µ –µ—Å–ª–∏ `risk_level` –±—ã–ª –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ "low"

## üéØ –ü–û–†–û–ì–ò

### –ê–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø–æ—Ä–æ–≥–∏ (—Ñ–∏–∑–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ):
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ:** –∞–º–ø–ª–∏—Ç—É–¥–∞ < 0.01 ‚Üí `risk_level = "high"`
- **–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ:** –∞–º–ø–ª–∏—Ç—É–¥–∞ < 0.03 ‚Üí `risk_level = "medium"`

### –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ—Ä–æ–≥–∏ (z-score):
- **–£–º–µ—Ä–µ–Ω–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ:** z-score > 2.0œÉ ‚Üí `severity = "medium"` –∏–ª–∏ `"high"`

## üìù –ü–†–ò–ú–ï–†–´

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–ª–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–≤–∏–∂–µ–Ω–∏–π
- **–ê–º–ø–ª–∏—Ç—É–¥–∞:** 0.005 (< 0.01)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** `critical_amplitude_drop = True` ‚Üí `risk_level = "high"`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** "–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –°–ù–ò–ñ–ï–ù–ò–ï: –∞–º–ø–ª–∏—Ç—É–¥–∞ 0.0050 < 0.01 (–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–≤–∏–∂–µ–Ω–∏–π)"

### –ü—Ä–∏–º–µ—Ä 2: –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∂–µ–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- **–ê–º–ø–ª–∏—Ç—É–¥–∞:** 0.025 (< 0.03)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** `moderate_amplitude_drop = True` ‚Üí `risk_level = "medium"`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** "–°–ù–ò–ñ–ï–ù–ù–ê–Ø –ê–ö–¢–ò–í–ù–û–°–¢–¨: –∞–º–ø–ª–∏—Ç—É–¥–∞ 0.0250 < 0.03 (–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∂–µ–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)"

### –ü—Ä–∏–º–µ—Ä 3: –ù–æ—Ä–º–∞–ª—å–Ω—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è
- **–ê–º–ø–ª–∏—Ç—É–¥–∞:** 0.073 (–Ω–æ—Ä–º–∞ ‚âà 0.073)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ—Ç –∞–Ω–æ–º–∞–ª–∏–π –∞–º–ø–ª–∏—Ç—É–¥—ã
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ù–æ—Ä–º–∞–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2025-01-15  
**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `inference_advanced.py`
- `utils/anomaly_analyzer.py`
- `medical_interface.py`

