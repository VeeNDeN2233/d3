# СРАВНЕНИЕ РАЗНЫХ МЕТОДОВ НОРМАЛИЗАЦИИ

## Результаты на видео baby.mp4

| Метод нормализации | Mean Error | Anomaly Rate | Статус |
|-------------------|------------|--------------|--------|
| **Исходная (относительно торса)** | 2.997 | 100% | ❌ Высокая ошибка |
| **Фиксированный hip_distance** | 10.128 | 100% | ❌ Очень высокая ошибка |
| **Bounding box + вращение** | 3.787 | 100% | ⚠️ Все еще высокая |

## Проблема

**Модель была обучена на данных с нормализацией относительно торса!**

Если мы меняем нормализацию при инференсе, но модель обучена на другой нормализации, то:
- Данные имеют другую структуру
- Модель не может правильно реконструировать
- Ошибка реконструкции высокая

## Решение

**НУЖНО ПЕРЕОБУЧИТЬ МОДЕЛЬ с новой нормализацией!**

### Вариант 1: Переобучить текущую модель
```bash
# В config.yaml установить:
normalize_by_body: true
rotate_to_canonical: true

# Переобучить:
python train_gpu.py --config config.yaml
```

### Вариант 2: Обучить Bidirectional LSTM + Attention с новой нормализацией
```bash
# Использовать более сложную модель + улучшенную нормализацию
python train_advanced.py --model bidir_lstm_attention --config config.yaml
```

## Ожидаемые результаты после переобучения

- **Mean error на validation**: ~1.7 (как сейчас)
- **Mean error на реальном видео**: ~1.7-2.0 (близко к validation)
- **Anomaly rate на нормальных видео**: < 20%

## Рекомендация

1. ✅ Использовать `normalize_by_body: true` и `rotate_to_canonical: true`
2. ✅ Переобучить модель с этими параметрами
3. ✅ Протестировать на реальном видео
4. ✅ Если не поможет, обучить Bidirectional LSTM + Attention

